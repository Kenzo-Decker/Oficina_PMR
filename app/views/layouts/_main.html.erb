<!-- <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" data-auto-replace-svg="nest"></script> -->

<!-- Icones de status -->
<div class="w-full bg-cinza py-2 flex flex-col justify-center items-center" x-data='{ open: false }'>
    <button class="bg-amarelo py-2 px-4 rounded mb-4 shadow-md flex flex-row items-center" @click='open = true'>
        <i class="hidden fas fa-redo-alt fa-lg mr-2"></i>
        <p class="text-white">Consultar status</p>
    </button>
    <p class="text-white text-base md:text-lg text-center" x-show='!open'>Para consultar o status das máquinas da Oficina PMR, clique no botão acima</p>
    <div class="w-full flex flex-row flex-wrap md:flex-nowrap items-start px-7" x-show='open'>
        <!-- Tornos -->
        <div class="flex-1 px-2 text-center" id="maquina1">
            <p class="text-white text-base md:text-lg py-2">Torno 1</p>
            <i class="fas fa-user-clock fa-4x laranja icon-shadow"></i>
            <p class="text-black text-sm md:text-base py-1"></p>
        </div>
        <div class="flex-1 px-2 text-center" id="maquina2">
            <p class="text-white text-base md:text-lg py-2">Torno 2</p>
            <i class="fas fa-check fa-4x verde icon-shadow"></i>
            <p class="text-black text-sm md:text-base py-1"></p>
        </div>
        <div class="flex-1 px-2 text-center" id="maquina3">
            <p class="text-white text-base md:text-lg py-2">Torno 3</p>
            <i class="fas fa-check fa-4x verde icon-shadow"></i>
            <p class="text-black text-sm md:text-base py-1"></p>
        </div>
        <div class="flex-1 px-2 text-center" id="maquina4">
            <p class="text-white text-base md:text-lg py-2">Torno 4</p>
            <i class="fas fa-check fa-4x verde icon-shadow"></i>
            <p class="text-black text-sm md:text-base py-1"></p>
        </div>
        <div class="divider"></div>
        <!-- Fresas -->
        <div class="flex-1 px-2 text-center" id="maquina5">
            <p class="text-white text-base md:text-lg py-2">Fresa 1</p>
            <i class="fas fa-check fa-4x verde icon-shadow"></i>
            <p class="text-black text-sm md:text-base py-1"></p>
        </div>
        <div class="flex-1 px-2 text-center" id="maquina6">
            <p class="text-white text-base md:text-lg py-2">Fresa 2</p>
            <i class="fas fa-check fa-4x verde icon-shadow"></i>
            <p class="text-black text-sm md:text-base py-1"></p>
        </div>
        <div class="flex-1 px-2 text-center" id="maquina7">
            <p class="text-white text-base md:text-lg py-2">Fresa 3</p>
            <i class="fas fa-check fa-4x verde icon-shadow"></i>
            <p class="text-black text-sm md:text-base py-1"></p>
        </div>
    </div>
</div>


<!-- Logica icones de status -->
<script>

    // VALORES TESTE
    const status = ['disp', 'disp', 'ocup', 'disp', 'manut', 'disp', 'ocup'];

    // VALORES DO BD 
    // var status_torno1 = Puxar do bd

    document.addEventListener('DOMContentLoaded', function () {
        $('button').on('click', function () {
            $(this)
                .find('[data-fa-i2svg]')
                .removeClass('hidden')
                .addClass('white')
                .parent().children()[1].textContent = 'Atualizar status';
            for (const [index,st] of status.entries()) {
                const maquina_id = '#maquina' + (index+1);
                console.log(maquina_id);
                // const maquina_id = '#maquina1';
                if (st == 'disp') {
                // if (true) {
                    $(maquina_id)
                        .find('[data-fa-i2svg]')
                        .removeClass('fa-wrench vermelho')
                        .removeClass('fa-user-clock laranja')
                        .addClass('fa-check verde')
                        .parent().children()[2].textContent = 'Disponível';
                }
                else if (st == 'ocup') {
                // else if (st == 'ocup') {
                    $(maquina_id)
                        .find('[data-fa-i2svg]')
                        .removeClass('fa-wrench vermelho')
                        .addClass('fa-user-clock laranja')
                        .removeClass('fa-check verde')
                        .parent().children()[2].textContent = 'Ocupado';
                }
                else {
                    $(maquina_id)
                        .find('[data-fa-i2svg]')
                        .addClass('fa-wrench vermelho')
                        .removeClass('fa-user-clock laranja')
                        .removeClass('fa-check verde')
                        .parent().children()[2].textContent = 'Em manutenção';
                }
        }});
    });
</script>

<!-- Sobre a oficina -->
<section class="bg-white flex flex-col justify-center items-center max-w-xl mx-auto">
    <ul class="list-none py-14">
        <li class="text-lg md:text-xl text-black font-semibold">SOBRE</li>
        <li class="text-4xl md:text-5xl azul-escuro font-semibold">OFICINA PMR</li>
    </ul>
    <div class="pb-14 flex flox-row flex-wrap">
        <div class="max-w-full h-auto px-4">
            <%= image_pack_tag 'media/img/oficina.png', alt: 'Oficina PMR' %>
        </div>
        <div class="text-base text-black text-justify p-4">
            A oficina do Departamento de Engenharia Mecatrônica conta com diversas ferramentas. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quaerat sed ratione magni delectus modi repellendus laudantium pariatur itaque tempora assumenda, quibusdam impedit similique natus non sit placeat mollitia? Deserunt, ipsum.
        </div>
    </div>
</section>